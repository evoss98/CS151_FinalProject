<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script type="text/javascript" src="http://epilog.stanford.edu/javascript/epilog.js"></script>
    <script type="text/javascript" src="http://worksheets.stanford.edu/javascript/worksheets.js"></script>
    
    <title>Kyudoku</title>
    
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet">
    
    <style type="text/css">

      table {
        border: 2px solid #000000;
        text-align: center;
      }

      td {
        border: 1px solid #000000;
        text-align: center;
        vertical-align: middle;  
        font-size: 24px;
        width: 48px;
        height: 48px;
        background: white;
      }

      input {
        padding: 0;
        border: 0;
        text-align: center;
        width: 48px;
        height: 48px;
        font-size: 24px;
        outline: none;
      }

    </style>
  </head>
  <body onload='initialize()'>

    <div class="container">
      
      <h1>Kyudoku</h1>

      <table id="grid">

        <tr>
          <td id="cell(1,1)" onclick='modbutton(this)'>&nbsp;</td>
          <td id="cell(1,2)" onclick='modbutton(this)'>&nbsp;</td>
          <td id="cell(1,3)" onclick='modbutton(this)'>&nbsp;</td>
          <td id="cell(1,4)" onclick='modbutton(this)'>&nbsp;</td>
          <td id="cell(1,5)" onclick='modbutton(this)'>&nbsp;</td>
          <td id="cell(1,6)" onclick='modbutton(this)'>&nbsp;</td>
        </tr>

        <tr>
          <td id="cell(2,1)" onclick='modbutton(this)'>&nbsp;</td>
          <td id="cell(2,2)" onclick='modbutton(this)'>&nbsp;</td>
          <td id="cell(2,3)" onclick='modbutton(this)'>&nbsp;</td>
          <td id="cell(2,4)" onclick='modbutton(this)'>&nbsp;</td>
          <td id="cell(2,5)" onclick='modbutton(this)'>&nbsp;</td>
          <td id="cell(2,6)" onclick='modbutton(this)'>&nbsp;</td>
        </tr>

        <tr>
          <td id="cell(3,1)" onclick='modbutton(this)'>&nbsp;</td>
          <td id="cell(3,2)" onclick='modbutton(this)'>&nbsp;</td>
          <td id="cell(3,3)" onclick='modbutton(this)'>&nbsp;</td>
          <td id="cell(3,4)" onclick='modbutton(this)'>&nbsp;</td>
          <td id="cell(3,5)" onclick='modbutton(this)'>&nbsp;</td>
          <td id="cell(3,6)" onclick='modbutton(this)'>&nbsp;</td>
        </tr>
  
        <tr>
          <td id="cell(4,1)" onclick='modbutton(this)'>&nbsp;</td>
          <td id="cell(4,2)" onclick='modbutton(this)'>&nbsp;</td>
          <td id="cell(4,3)" onclick='modbutton(this)'>&nbsp;</td>
          <td id="cell(4,4)" onclick='modbutton(this)'>&nbsp;</td>
          <td id="cell(4,5)" onclick='modbutton(this)'>&nbsp;</td>
          <td id="cell(4,6)" onclick='modbutton(this)'>&nbsp;</td>
        </tr>

        <tr>
          <td id="cell(5,1)" onclick='modbutton(this)'>&nbsp;</td>
          <td id="cell(5,2)" onclick='modbutton(this)'>&nbsp;</td>
          <td id="cell(5,3)" onclick='modbutton(this)'>&nbsp;</td>
          <td id="cell(5,4)" onclick='modbutton(this)'>&nbsp;</td>
          <td id="cell(5,5)" onclick='modbutton(this)'>&nbsp;</td>
          <td id="cell(5,6)" onclick='modbutton(this)'>&nbsp;</td>
        </tr>
  
        <tr>
          <td id="cell(6,1)" onclick='modbutton(this)'>&nbsp;</td>
          <td id="cell(6,2)" onclick='modbutton(this)'>&nbsp;</td>
          <td id="cell(6,3)" onclick='modbutton(this)'>&nbsp;</td>
          <td id="cell(6,4)" onclick='modbutton(this)'>&nbsp;</td>
          <td id="cell(6,5)" onclick='modbutton(this)'>&nbsp;</td>
          <td id="cell(6,6)" onclick='modbutton(this)'>&nbsp;</td>
        </tr>
      </table>

      <ul>
        <li id=nineselected style='color:red'> Select 9 numbers</li>
        <li id=unique style='color:red'> All 9 numbers selected are unique</li>
        <li id=lessthan9row style='color:red'> All row sums are less than or equal to 9</li>
        <li id=lessthan9col style='color:red'> All column sums are less than or equal to 9</li>
      </ul>

      <h1 id=winner style='visibility:hidden' >You found a winning solution!</h1>
    </div>
    <textarea id='lambda' type='text/hrf' style='display:none'>
      click2(6,4)
      square(1,1,1)
      square(1,2,6)
      square(1,3,5)
      square(1,4,9)
      square(1,5,2)
      square(1,6,2)
      square(2,1,1)
      square(2,2,3)
      square(2,3,9)
      square(2,4,6)
      square(2,5,2)
      square(2,6,7)
      square(3,1,9)
      square(3,2,4)
      square(3,3,9)
      square(3,4,4)
      square(3,5,5)
      square(3,6,9)
      square(4,1,4)
      square(4,2,2)
      square(4,3,8)
      square(4,4,2)
      square(4,5,9)
      square(4,6,8)
      square(5,1,9)
      square(5,2,4)
      square(5,3,1)
      square(5,4,4)
      square(5,5,9)
      square(5,6,3)
      square(6,1,1)
      square(6,2,1)
      square(6,3,4)
      square(6,4,1)
      square(6,5,3)
      square(6,6,8)

    </textarea>
    <textarea id='library' type='text/hrf' style='display:none'>
      click(cell(X,Y)) & ~click1(X,Y) & ~click2(X,Y) & distinct(cell(X,Y), cell(6,4))==> click1(X,Y) & ~click3(X,Y)
      click(cell(X,Y)) & click1(X,Y) & distinct(cell(X,Y), cell(6,4)) ==> click2(X,Y) & ~click1(X,Y)
      click(cell(X,Y)) & click2(X,Y) & distinct(cell(X,Y), cell(6,4)) ==> click3(X,Y) & ~click2(X,Y)

      style(cell(X,Y), background, red) :- click1(X,Y)
      style(cell(X,Y), color, red) :- click1(X,Y)
      style(cell(X,Y), background, yellow) :- click2(X,Y)
      style(cell(X,Y), color, black) :- click2(X,Y)
      style(cell(X,Y), background, white) :- click3(X,Y)

      innerhtml(cell(X,Y), W) :- square(X,Y,W)

      ninetotal :- evaluate(countofall(cell(X,Y), click2(X,Y)), 9)
      allunique :- evaluate(length(setofall(W, square(X,Y,W) & click2(X,Y))), 9)

      style(nineselected, color, green) :- ninetotal
      style(nineselected, color, red) :- ~ninetotal
      style(unique, color, green) :- allunique
      style(unique, color, red) :- ~allunique

      row1 :- evaluate(max(sum(setofall(W, square(1, Y, W) & click2(1,Y))),9), 9)
      row2 :- evaluate(max(sum(setofall(W, square(2, Y, W) & click2(2,Y))),9), 9)
      row3 :- evaluate(max(sum(setofall(W, square(3, Y, W) & click2(3,Y))),9), 9)
      row4 :- evaluate(max(sum(setofall(W, square(4, Y, W) & click2(4,Y))),9), 9)
      row5 :- evaluate(max(sum(setofall(W, square(5, Y, W) & click2(5,Y))),9), 9)
      row6 :- evaluate(max(sum(setofall(W, square(6, Y, W) & click2(6,Y))),9), 9)

      col1 :- evaluate(max(sum(setofall(W, square(X, 1, W) & click2(X,1))),9), 9)
      col2 :- evaluate(max(sum(setofall(W, square(X, 2, W) & click2(X,2))),9), 9)
      col3 :- evaluate(max(sum(setofall(W, square(X, 3, W) & click2(X,3))),9), 9)
      col4 :- evaluate(max(sum(setofall(W, square(X, 4, W) & click2(X,4))),9), 9)
      col5 :- evaluate(max(sum(setofall(W, square(X, 5, W) & click2(X,5))),9), 9)
      col6 :- evaluate(max(sum(setofall(W, square(X, 6, W) & click2(X,6))),9), 9)

      allrows :- row1 & row2 & row3 & row4 & row5 & row6
      allcols :- col1 & col2 & col3 & col4 & col5 & col6

      style(lessthan9row, color, green) :- allrows
      style(lessthan9row, color, red) :- ~allrows
      style(lessthan9col, color, green) :- allcols
      style(lessthan9col, color, red) :- ~allcols


      style(winner, visibility, visible) :- allrows & allcols & ninetotal & allunique
      
    </textarea>

  </body>
</html>
